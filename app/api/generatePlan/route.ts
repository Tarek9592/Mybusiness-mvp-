// app/api/generatePlan/route.ts
import { NextResponse } from "next/server";

// ุงุฎุชุจุงุฑ ุณุฑูุน ูู ุงููุชุตูุญ (GET)
export async function GET() {
  return NextResponse.json({
    ok: true,
    hint: "ุงุณุชุฎุฏู POST ุนูู ููุณ ุงูุฑุงุจุท ูุน JSON ูุฅุฑุฌุงุน ูุนุงููุฉ ุงูุฎุทุฉ.",
    exampleBody: {
      type: "ุชุฑุจูุฉ ุฏูุงุฌู ูุญู",
      country: "ูุตุฑ",
      city: "ุงููููู",
      capital: 12000
    }
  });
}

// ุชูููุฏ ูุนุงููุฉ ุฎุทุฉ (POST)
export async function POST(req: Request) {
  let data: any = {};
  try {
    data = await req.json();
  } catch {
    data = {};
  }

  const {
    type = "ุชุฑุจูุฉ ุฏูุงุฌู ูุญู",
    country = "ูุตุฑ",
    city = "ุงููููู",
    capital = 10000
  } = data;

  const preview =
`๐ ุฎุทุฉ ูุดุฑูุน: ${type}
ุงููููุน: ${country} โ ${city}
ุฑุฃุณ ุงููุงู: ${capital} ุฏููุงุฑ

โ ููุฎุต ุชูููุฐู:
ูุดุฑูุน ${type} ูุณุชูุฏู ุงูุณูู ุงููุญูู ุจุฅูุชุงุฌ ุนุงูู ุงูุฌูุฏุฉ ูุน ุถุจุท ุงูุชูุงููู.

โ ุงูุชุดุบูู:
- ุฏูุฑุฉ ุงูุชุดุบูู: 35 ููู ุชุฑุจูุฉ + 15 ููู ุชุทููุฑ
- ูููุฐุฌ ุงูุจูุน: ูุณุชููู ููุงุฆู + ูุทุงุนู + ููุฑุฏูู

โ ุชุญููู SWOT:
โข ุงูููุฉ: ุทูุจ ูุณุชูุฑ ุนูู ุงูุจุฑูุชูู ุงูุญููุงูู
โข ุงูุถุนู: ุญุณุงุณูุฉ ุฃุณุนุงุฑ ุงูุนูู
โข ุงููุฑุต: ุงูุชูุณุน ุงูุฅููููู
โข ุงูุชูุฏูุฏุงุช: ุงูุฃูุฑุงุถ ูุชููุจุงุช ุงูุณูู

๐ ููุงุญุธุฉ: ูุฐู ูุนุงููุฉ ุณุฑูุนุฉ. ุณูุชู ุชูููุฏ ุฃุฑูุงู ุชูุตูููุฉ ูู ุงูุฅุตุฏุงุฑุงุช ุงูุชุงููุฉ.`;

  return NextResponse.json({
    ok: true,
    input: { type, country, city, capital },
    preview
  });
}
